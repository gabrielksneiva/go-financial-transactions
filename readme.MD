
# ğŸ’¸ Financial Kafka Consumer Project

Este Ã© um projeto de exemplo que simula um sistema financeiro com operaÃ§Ãµes de depÃ³sito, saque, saldo e extrato. A comunicaÃ§Ã£o entre os serviÃ§os Ã© feita via Apache Kafka, com persistÃªncia em PostgreSQL, API em Go + Fiber e uso de GORM como ORM.

## ğŸ“¦ Tecnologias Utilizadas

- Go
- Fiber
- Kafka
- PostgreSQL
- GORM
- Docker

ğŸ“ Estrutura do Projeto

.
â”œâ”€â”€ api/               # Handlers da API e configuraÃ§Ã£o do Fiber
â”‚   â”œâ”€â”€ api.go         # InicializaÃ§Ã£o do servidor HTTP
â”‚   â”œâ”€â”€ handlers.go    # FunÃ§Ãµes HTTP (deposit, withdraw, balance, statement)
â”‚   â””â”€â”€ routes.go      # DefiniÃ§Ã£o das rotas da aplicaÃ§Ã£o
â”‚
â”œâ”€â”€ consumer/          # LÃ³gica do consumidor Kafka
â”‚
â”œâ”€â”€ domain/            # DefiniÃ§Ã£o das entidades e interfaces
â”‚
â”œâ”€â”€ producer/          # LÃ³gica do produtor Kafka
â”‚
â”œâ”€â”€ repositories/      # ImplementaÃ§Ãµes dos repositÃ³rios com GORM
â”‚
â”œâ”€â”€ services/          # Regras de negÃ³cio (DepÃ³sito, Saque, Extrato)
â”‚
â”œâ”€â”€ workers/           # Worker pool para processar transaÃ§Ãµes recebidas
â”‚
â”œâ”€â”€ go.mod             # Arquivo de definiÃ§Ã£o de mÃ³dulos Go
â”œâ”€â”€ go.sum             # Checksum das dependÃªncias
â”œâ”€â”€ main.go            # Ponto de entrada da aplicaÃ§Ã£o
â””â”€â”€ README.md          # DocumentaÃ§Ã£o do projeto

## ğŸš€ Como Rodar o Projeto

### PrÃ©-requisitos

- Go 1.21+
- Docker & Docker Compose

### 1. Suba os containers (Kafka + PostgreSQL)

docker-compose up -d

### 2. Rode a aplicaÃ§Ã£o Go

go run main.go

## ğŸ“¬ Endpoints da API

| MÃ©todo | Rota                     | DescriÃ§Ã£o                  |
|--------|--------------------------|----------------------------|
| POST   | /deposit                 | Envia depÃ³sito para Kafka  |
| POST   | /withdraw                | Envia saque para Kafka     |
| GET    | /balance/:user_id        | Retorna saldo atual        |
| GET    | /statement/:user_id      | Retorna extrato completo   |

### Exemplo de POST /deposit

{
  "user_id": "user123",
  "amount": 100.0
}

## ğŸ›  Teste de Carga (Opcional)

VocÃª pode usar k6 para realizar testes de carga:

k6 run load-test.js

## ğŸ“Š VisualizaÃ§Ã£o do Kafka

Ferramentas recomendadas para visualizar mensagens Kafka:

- Kafdrop
- Kafka Tool

## ğŸ“Œ PossÃ­veis Melhorias Futuras

- AutenticaÃ§Ã£o com JWT
- IntegraÃ§Ã£o com Fireblocks (saques)
- MÃ©tricas com Prometheus/Grafana
- Testes unitÃ¡rios e integraÃ§Ã£o

## ğŸ‘¨â€ğŸ’» Autor

Desenvolvido com ğŸ’™ em Go para estudos de Kafka + arquitetura limpa.
