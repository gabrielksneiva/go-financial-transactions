
# ğŸ’¸ Go Financial Transactions

> A performant and scalable financial transaction system built with Go, Kafka, PostgreSQL, and Redis, featuring secure blockchain withdrawals via TRON.

![Project Architecture](docs/assets/architecture.png)

[![Go](https://img.shields.io/badge/Go-1.21-blue)](https://golang.org/)
[![Tests](https://github.com/gabrielksneiva/go-financial-transactions/actions/workflows/go-ci.yml/badge.svg)](https://github.com/gabrielksneiva/go-financial-transactions/actions)
[![Coverage](https://img.shields.io/badge/coverage-89%25-brightgreen)](#)
[![License](https://img.shields.io/github/license/gabrielksneiva/go-financial-transactions)](LICENSE)

---

## ğŸ§  Project Overview

This repository presents a modern financial transaction system developed using the Go programming language. It is designed for high scalability, performance, and securityâ€”ideal for applications such as digital wallets, online banking platforms, and fintech APIs.

**Key features include:**

- ğŸ” JWT-based authentication
- ğŸ§µ Asynchronous transaction processing using Apache Kafka
- ğŸ§  Worker-based concurrency model in Go
- ğŸ“¦ PostgreSQL with GORM for persistent storage
- ğŸš¦ Redis for request rate limiting
- ğŸŒ Integration with the TRON blockchain for secure withdrawals
- âœ… >85% test coverage
- âš™ï¸ CI/CD via GitHub Actions

---

## ğŸ§© Architecture

The project follows a modular and layered architecture, ensuring code clarity, separation of concerns, and scalability.

```
        +------------------+
        |   API (Fiber)    |
        +--------+---------+
                 |
                 v
     +-----------+------------+
     |     Business Logic     |
     +-----------+------------+
                 |
     +-----------+------------+
     |      Repositories      |
     +-----+------------+-----+
           |            |
     +-----+         +--+-------------+
     | Kafka         | PostgreSQL     |
     +-----+         +----------------+
        |
   +----+-------+
   |  Workers   |
   +------------+
```

Kafka acts as a message broker between the API and background workers, allowing for asynchronous, distributed transaction processing.

---

## ğŸ› ï¸ Technologies Used

- [Go 1.21](https://golang.org/)
- [Apache Kafka](https://kafka.apache.org/)
- [Fiber Web Framework](https://gofiber.io/)
- [PostgreSQL](https://www.postgresql.org/)
- [Redis](https://redis.io/)
- [GORM ORM](https://gorm.io/)
- [JWT](https://github.com/golang-jwt/jwt)
- [TRON Blockchain SDK](https://developers.tron.network/)
- [sqlmock](https://github.com/DATA-DOG/go-sqlmock)
- [GitHub Actions](https://github.com/features/actions)

---

## ğŸ” Authentication

All secure routes require a valid JWT token. Authentication is handled via the `/api/login` endpoint, and token validation is enforced via middleware.

---

## ğŸ§¾ API Endpoints

| Method | Endpoint                     | Description                                | Authentication |
|--------|------------------------------|--------------------------------------------|----------------|
| POST   | `/api/register`              | Register a new user                        | âŒ No           |
| POST   | `/api/login`                 | Authenticate and receive JWT               | âŒ No           |
| POST   | `/api/deposit`               | Create a new deposit                       | âœ… Yes          |
| POST   | `/api/withdraw`              | Initiate a withdrawal via TRON blockchain  | âœ… Yes          |
| GET    | `/api/balance/:user_id`      | Retrieve user's current balance            | âœ… Yes          |
| GET    | `/api/statement/:user_id`    | Retrieve user's transaction statement      | âœ… Yes          |

> ğŸ”„ Withdrawals are processed through the **TRON blockchain**, ensuring fast and secure crypto transfers.

---

## ğŸš€ Getting Started

### Prerequisites

- Go 1.21+
- Docker + Docker Compose

### Installation

```bash
# Clone the repository
git clone https://github.com/gabrielksneiva/go-financial-transactions.git
cd go-financial-transactions

# Start services (PostgreSQL, Kafka, Redis)
docker-compose up -d

# Run the application
go run main.go
```

---

## ğŸ§ª Running Tests

```bash
# Run all unit tests
go test ./... -coverprofile=coverage.out

# Check coverage
go tool cover -func=coverage.out
```

> âœ… Unit tests are available for all core layers: services, handlers, middleware, repositories, and workers.

---

## ğŸ“ Project Structure

```bash
.
â”œâ”€â”€ api/               # HTTP handlers and routing (Fiber)
â”œâ”€â”€ config/            # Configuration logic
â”œâ”€â”€ consumer/          # Kafka consumer
â”œâ”€â”€ client/            # Application clients
â”œâ”€â”€ producer/          # Kafka producer
â”œâ”€â”€ domain/            # Entities and interfaces
â”œâ”€â”€ services/          # Business logic
â”œâ”€â”€ workers/           # Transaction workers
â”œâ”€â”€ repositories/      # Database access layer
â”œâ”€â”€ mocks/             # Mocks for testing
â”œâ”€â”€ main.go            # Application entry point
â”œâ”€â”€ go.mod / go.sum    # Dependencies
â””â”€â”€ README.md          # Project documentation
```

---

## ğŸ§  Key Concepts

- Clean and modular architecture
- Kafka-based asynchronous event processing
- Goroutines and channel patterns
- Rate limiting with Redis
- Blockchain integration using the TRON SDK
- Extensive unit testing with mocking
- CI/CD pipelines with GitHub Actions

---

## ğŸ”® Future Enhancements

- [ ] Add Swagger/OpenAPI documentation
- [ ] Integrate with external custody services (e.g. Fireblocks)
- [ ] Enable observability with Prometheus and Grafana
- [ ] Deploy on Render, Railway or AWS ECS
- [ ] Implement audit logs for compliance

---

## ğŸ‘¨â€ğŸ’» Author

**Gabriel Kryzanovski dos Santos Neiva**  
[GitHub](https://github.com/gabrielksneiva) â€¢ [LinkedIn](https://linkedin.com/in/gabrielksneiva)

---
