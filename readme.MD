
# ğŸ’¸ Financial Kafka Transaction Processor

This backend system is designed to process financial transactions using Go, Kafka, and GORM. It handles deposit and withdrawal requests via an HTTP API, queues them in Kafka, and processes them asynchronously using a worker pool that updates the database.

---

## ğŸš€ Features

- Seamless Kafka Producer and Consumer integration
- Asynchronous processing powered by a worker pool
- Persistent storage with PostgreSQL and GORM
- HTTP API built using Fiber
- Domain-driven design with clear separation of concerns
- Balance inquiries and transaction statement retrieval
- Transaction processing with Kafka for asynchronous operations
- Background transaction processing via a worker pool

---

## ğŸ“¦ Requirements

- Go 1.20+
- Kafka
- PostgreSQL

---

## âš™ï¸ Setup

1. **Clone the repository**

```bash
git clone https://github.com/gabrielksneiva/go-financial-transactions.git
cd go-financial-transactions
```

2. **Install dependencies**

```bash
go mod tidy
```

3. **Start PostgreSQL and Kafka**

You can use Docker or local services. Ensure Kafka is running on `localhost:9092` and PostgreSQL on `localhost:5432` with the database name, user, and password configured in `repositories.InitDatabase()`.

4. **Run the application**

```bash
go run main.go
```

---

## ğŸ“˜ API Endpoints

| Method | Endpoint               | Description               |
|--------|------------------------|---------------------------|
| POST   | `/deposit`             | Submit a deposit request  |
| POST   | `/withdraw`            | Submit a withdrawal request |
| POST   | `/user`                | Create a new user         |
| GET    | `/balance/:user_id`    | Retrieve user balance     |
| GET    | `/statement/:user_id`  | Retrieve transaction statement |

Example payload for deposit/withdraw requests:
```json
{
  "user_id": 123,
  "amount": 100.50
}
```

---

## ğŸ§ª Load Testing

You can use [k6](https://k6.io/) to perform load testing:

1. Install k6.
2. Create a script (e.g., `loadtest.js`).
3. Run the test:
```bash
k6 run loadtest.js
```

---

## ğŸ› ï¸ Project Structure

```text
.
â”œâ”€â”€ api/               # HTTP handlers and Fiber setup
â”‚   â”œâ”€â”€ api.go         # Initializes the HTTP server
â”‚   â”œâ”€â”€ handlers.go    # Request handlers
â”‚   â””â”€â”€ routes.go      # Route definitions
â”‚â”€â”€ config/            # Application configuration
â”œâ”€â”€ consumer/          # Kafka consumer logic
â”œâ”€â”€ domain/            # Domain entities and interfaces
â”œâ”€â”€ producer/          # Kafka producer logic
â”œâ”€â”€ repositories/      # Repository implementations using GORM
â”œâ”€â”€ services/          # Business logic (Deposit, Withdraw, Statement)
â”œâ”€â”€ workers/           # Worker pool for background transaction processing
â”‚
â”œâ”€â”€ docker-compose.yaml# Docker Compose configuration
â”œâ”€â”€ go.mod             # Go module file
â”œâ”€â”€ go.sum             # Dependency checksum file
â”œâ”€â”€ main_test.go       # Application entry point tests
â”œâ”€â”€ main.go            # Application entry point
â”œâ”€â”€ Makefile           # Makefile for project automation
â””â”€â”€ README.md          # Project documentation
```

---

## ğŸ“„ License

MIT License Â© 2023 Gabriel Krzyzanovski dos Santos Neiva

